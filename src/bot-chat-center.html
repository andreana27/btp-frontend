<template>
  <require from="./resources/elements/bot-chat.css"></require>
  <require from="chat-center.css"></require>
  <section class="content-header">
    <h1>
      Data
      <small>Bot Chat Center</small>
    </h1>
    <ol class="breadcrumb">
      <li><a href="../../index.html"><i class="fa fa-dashboard"></i> Home</a></li>
      <li><a href="../../index.html">Chat Center</a></li>
      <li class="active">Bot Chat Center</li>
    </ol>
  </section>
  <br>
  <section class="content">
    <!-- section chat-->

    <div class="row">
      <div class="col-sm-4">
        <div class="row">
          <div class="col-sm-12">
             <div class="panel panel-info">
              <div class="panel-heading">
              <div class="row">
                <div class="col-md-12">
                  <h4>${bot.name}</h4>
                      <i class="fa fa-circle ${bot.enabled===true? 'text-success' : 'text-error'}"></i>
                      ${bot.enabled===true ? 'Online': 'Offline'}
                </div>
              </div>
                <div><p style="border-bottom: 1px solid lightslategrey;"></p></div>
                  <div class="row">
                    <!--<label align="right" class="col-sm-2">Bot</label>-->
                    <div class="col-sm-9">
                      <select value.bind="selectedBotId" class="form-control" style="border-radius: 10px;">
                        <option repeat.for="bot of bot_list" model.bind="bot.id">${bot.name}</option>
                      </select>
                    </div>
                    <div class="col-sm-1">
                      <button class="btn btn-primary " type="submit" click.delegate="getChats()"><i class="fa fa-search" style="width:10px;border-radius: 5px;"></i></button>
                    </div>                    
                  </div>
              </div>
                <div class="panel-body" style="height: 355px;">                  
                  <div class="row">
                    <div class="col-sm-8">
                      <select value.bind="selectedoption" change.delegate="changeCombo()" class="form-control" style=" border-radius: 10px;">
                        <option  model.bind='1'>Bot Only</option>
                        <option  model.bind='2'>Active</option>
                        <option  model.bind='3'>Closed</option>
                      </select>
                    </div>
                  </div>
                  <br>
                  <div class="pre-scrollable" style="max-height: 270px;">
                    <div id="contenedor" show.bind="loading">
                       <div class="loader" id="loader">Loading...</div>
                    </div>
                    <ul class="friend-list" show.bind="botSelected" id="userchat">
                      <li class="active bounceInDown"  repeat.for="contact of unread">
                        <!--   va en el click delegate variablesUser(contact.owner,contact.userfb) -->
                        <a click.delegate="conversations(contact.owner,contact.userfb,contact.imagen)" class="clearfix">
                         <img src="${contact.imagen}" alt="" class="img-circle">
                          <!--assets/images/person_64.png -->
                          <div class="friend-name">
                            <strong>${contact.userfb}</strong><br>${contact.owner}
                            <!--<strong><i style="color:${contact.unread===true? 'red' : ''}"class="${contact.unread===true? 'fa fa-circle' : ''}"></i></strong>-->
                          </div>
                        </a>
                      </li>
                    </ul>
                  </div>
                  
                </div>
              </div>
          </div>
        </div>
      </div>

      <div class="col-sm-4">
        <div class="row">
          <div class="col-sm-12">
            <div class="panel panel-info">
                <div class="panel-body" style="height: 355px;">
                  <div class="pre-scrollable" id="final" style="overflow-x: hidden">
                    <div id="contenedor" show.bind="loading_mensaje">
                       <div class="loader" id="loader">Loading...</div>
                    </div>
                     <ul class="chat" id="lista" innerhtml.bind="messagesHTML">
                      </ul>
                    <div id="divfin"></div>
                  </div>
                </div>
                <div>
                  <textarea class="form-control" rows="2" id="message" value.bind="messageToClient"></textarea>
                </div>
                <div class="panel-heading">
                  <div >
                    <a align="right" class="btn btn-md" style="border-color:#00CED1; color: dodgerblue; color:black;" >
                     Leave/stop Chat</a>
                     <button type="button" class="btn btn-default " id="btnSend" style="background:#00CED1; color:black;" click.delegate="sendMessage(messageToClient)">Send</button>
                    <!--<a  class="btn btn-md" style="background:#00CED1; color:black;">
                     Send</a>-->
                </div>
                </div>
              </div>
          </div>
        </div>
      </div>

      <div class="col-sm-4">
        <div class="row">
          <div class="col-sm-12">
            <div class="panel panel-info">
              <div class="panel-heading">
                <div class="titleuser" innerhtml.bind="selectedContactName"></div>
                <div class="" innerhtml.bind="id_usuario"></div>
              </div>
                <div class="panel-body" id="cambiar">
                  <div class="pre-scrollable" style="overflow-x:hidden;">
                    <div class="row">
                      <label class="col-md-5">Custom variables</label>
                      <label class="col-md-5">Value</label>
                    </div>
                    <div class="row">
                      <ul class="friend-list" repeat.for="key of key_list" show.bind="showvar">
                        <li>
                          <div >
                          <div class="col-md-4"><input type="text" class="form-control" value.bind="key.storage_key"></div>
                          <div class="col-md-4"><input type="text" class="form-control" value.bind="key.storage_value"></div>
                          <div class="btn-group"><button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="updateVariable(id_usuario,key.storage_key,key.storage_value)"><i class="fa fa-spinner" aria-hidden="true"></i></button>
                            <button type="button" class="btn btn-default btn-circle btn-xl" id="var1" click.delegate="removeVariable(id_usuario,key.storage_key,key.storage_value)"><i class="fa fa-trash" aria-hidden="true"></i></button></div>
                          </div>
                        </li>

                      </ul>

                      <ul class="friend-list" >
                        <li class="clonedInput" id="input1">
                          <div class="col-md-4" ><input type="text" class="form-control" value.bind="keys1"></div>
                          <div class="col-md-4" ><input type="text" class="form-control" value.bind="values1" ></div>
                          <div class="btn-group"><button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="updateVariable(id_usuario,keys1,values1)"><i class="fa fa-spinner" aria-hidden="true"></i></button>
                          <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeVariable(id_usuario,keys1,values1)"><i class="fa fa-trash" aria-hidden="true"></i></button></div>
                          
                        </li>
                      </ul>
                    </div>
                    
                  </div>
                  <div>
                      <br>
                      <button type="button" class="btn btn-default " id="btnAdd"><i class="fa fa-plus" aria-hidden="true"></i> Add</button>
                      <button type="button" class="btn btn-default " id="btnDel" disabled><i class="fa fa-close" aria-hidden="true"></i> Delete</button>
                    </div>
                  </div>
              </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</template>
