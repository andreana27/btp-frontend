<template>
  <require from="resources/elements/autocomplete"></require>
  <div class="nav-tabs-custom">
    <ul class="nav nav-tabs">
      <li class="" style="display:none"><a href="#intents" data-toggle="tab" aria-expanded="false">Intents</a></li>
      <li class="active"><a href="#timeline" data-toggle="tab" aria-expanded="true">Flow</a></li>
      <li class=""><a href="#settings" data-toggle="tab" aria-expanded="false">Settings</a></li>
    </ul>
    <div class="tab-content">
      <div class="tab-pane" id="intents" style="display:none">
        <h4>
          Intents
          <small>
            Intents are the identified intended actions a user desired to say.
          </small>
        </h4>
        <table class="table table-bordered">
          <tbody>
            <tr>
              <th style="width: 10px">#</th>
              <th>Example</th>
              <th>Intent</th>
              <th>Triggered Context</th>
              <th>Actions</th>
            </tr>
            <tr>
              <td>1.</td>
              <td>Just about anything...</td>
              <td>Other</td>
              <td>
                Default Context
              </td>
              <td>
                <a class="btn btn-xs btn-default">edit</a>
                <a class="btn btn-xs btn-default">delete</a>
              </td>
            </tr>
            <tr>
              <td>New</td>
              <td><input type="text" class="form-control"></input></td>
              <td>
                <select id="selectbasic" name="selectbasic" class="form-control">
                  <option value="1">Other</option>
                  <option value="2">New...</option>
                </select>
              </td>
              <td>
                <select id="selectbasic" name="selectbasic" class="form-control">
                  <option value="1">Default context</option>
                  <option value="2">Context two</option>
                </select>
              </td>
              <td>
                <a class="btn btn-xs btn-default">save</a>
              </td>
            </tr>
          </tbody>
        </table>
          <!-- /.box-body -->
          <div class="box-footer">
            <button type="submit" class="btn btn-info pull-right">Save & Train</button>
            <button type="submit" class="btn btn-default pull-right">Cancel</button>
          </div>
          <!-- /.box-footer -->
      </div>
      <!-- /.tab-pane -->
      <div  class="tab-pane active" id="timeline">
        <!-- The timeline -->
        <ul  class="timeline timeline-inverse">
          <!-- timeline time label -->
          <li class="time-label">
            <span class="bg-blue">
              ${context.name}
            </span>
            <button type="button" class="btn btn-circle bg-green"
            click.delegate='deleteContext(context)' ><i class="fa fa-trash" aria-hidden="true"></i></button>
          </li>
          <!-- /.timeline-label -->
          <!-- timeline item -->
          <li repeat.for="element of json_Context[context.name]" ref="$root" index.bind="$index">
            <div class="row">
              <div class="col-xs-6 col-md-8 col-lg-10 vcenter">
                <div><i click.delegate="moveUp(json_Context[context.name],element)" class="fa fa-caret-up"></i></div>
                <div><i click.delegate="moveDown(json_Context[context.name],element)" class="fa fa-caret-down"></i></div>
              </div>
            </div>
            <i if.bind="element.type=='text'" class="fa fa-file-text-o bg-blue"></i>
            <i if.bind="element.type=='sender_action'" class="fa fa-send-o bg-blue"></i>
            <i if.bind="element.type=='quick_reply'" class="fa fa-reply bg-blue"></i>
            <i if.bind="element.type=='smartText'" class="fa fa-pencil-square-o bg-blue"></i>
            <i if.bind="element.type=='smartReply'" class="fa fa-star bg-blue"></i>
            <i if.bind="element.type=='attachment'" class="fa fa-paperclip bg-blue"></i>
            <i if.bind="element.type=='rest'" class="fa fa-plug bg-blue"></i>
            <i if.bind="element.type=='chatCenter'" class="fa fa-keyboard-o bg-blue"></i>
            <i if.bind="element.type=='checkPoint'" class="fa fa-check-circle"></i>
            <i if.bind="element.type=='decisionRest'" class="fa fa-external-link-square"></i>
            <div if.bind="element.type=='text'"  class="timeline-item">
              <!--<span class="time"><i class="fa fa-clock-o"></i> 12:05</span>-->

              <h3 class="timeline-header"><a href="#">${element.type}</a></h3>
              <div class="timeline-body">
                <div class="row">
                  <label class="col-sm-2 control-label">Content</label>
                  <div class="col-sm-10">
                    <textarea class="form-control" rows="5" value.bind="element.content" change.delegate="elementChanged($index, element)"></textarea>
                  </div>
                </div>
                <br>
                <div class="row">
                  <label class="col-sm-2 control-label">Store on</label>
                  <div class="col-sm-10">
          					<!--<input class="form-control" type="text" value.bind="element.store"
                           change.delegate="elementChanged($index, element)">-->
                     <autocomplete  value.bind="element.store" service.bind="variableService"
                             placeholder="Enter variable name" change.delegate="elementChanged($index, element)">
                     </autocomplete>
          				</div>
                </div>
              </div>
              <div class="timeline-footer">
                <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeElement($index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
            <div if.bind="element.type=='checkPoint'"  class="timeline-item">
              <!--<span class="time"><i class="fa fa-clock-o"></i> 12:05</span>-->
              <h3 class="timeline-header"><a href="#">${element.type}</a></h3>
              <div class="timeline-body">
                <div class="row">
                  <label class="col-sm-2 control-label">Name</label>
                  <div class="col-sm-10">
                    <textarea class="form-control" rows="1" value.bind="element.content" change.delegate="elementChanged($index, element)"></textarea>
                  </div>
                </div>
                <br>
              </div>
              <div class="timeline-footer">
                <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeElement($index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
            <div if.bind="element.type=='chatCenter'"  class="timeline-item">
              <!--<span class="time"><i class="fa fa-clock-o"></i> 12:05</span>-->
              <h3 class="timeline-header"><a href="#">${element.type}</a></h3>
              <div class="timeline-body">
                <div class="row">
                  <label class="col-sm-2 control-label">Content</label>
                  <div class="col-sm-10">
                    <textarea class="form-control" rows="5" value.bind="element.content" change.delegate="elementChanged($index, element)"></textarea>
                  </div>
                </div>
                <br>
                <div class="row">
                  <label class="col-sm-2 control-label">Store on</label>
                  <div class="col-sm-10">
          					<!--<input class="form-control" type="text" value.bind="element.store"
                           change.delegate="elementChanged($index, element)">-->
                     <autocomplete  value.bind="element.store" service.bind="variableService"
                             placeholder="Enter variable name" change.delegate="elementChanged($index, element)">
                     </autocomplete>
          				</div>
                </div>
              </div>
              <div class="timeline-footer">
                <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeElement($index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
            <div if.bind="element.type=='sender_action'"  class="timeline-item">
              <!--<span class="time"><i class="fa fa-clock-o"></i> 12:05</span>-->
              <h3 class="timeline-header"><a href="#">sender action</a></h3>
              <div class="timeline-body">
                <label class="col-sm-2 control-label">Action</label>
                <div class="col-sm-10">
                  <select value.bind="element.sender_action" class="form-control" change.delegate="elementChanged($index, element)" >
                    <option repeat.for="action of SenderActionOptions" model.bind="action.id">${action.name}</option>
                  </select>
                </div>
              </div>
              <div class="timeline-footer">
                <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeElement($index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
            <!-- Decision REST PLUGIN-->
            <div if.bind="element.type=='decisionRest'" class="timeline-item">
              <!--<span class="time"><i class="fa fa-clock-o"></i> 12:05</span>-->
              <h3 class="timeline-header"><a href="#">Decision REST PLUGIN</a></h3>
              <div class="timeline-body">
                <div class="panel-heading">REST API Plugin</div>
                <div class="panel-body">
                  <div>
                    <h4>
                      Use this plugin to create various integrations with your server - generate dynamic content
                      or send data. You can apply user attributes in either the URL or the USER ATTRIBUTES field.
                      With POST request type, user attributes will be sent in a standard way. With GET request,
                      they will be added to the URL as GET parameters.
                    </h4>
                  </div>
                  <div class="row">
                    <label class="col-sm-2 ">Type</label>
                    <label class="col-sm-10">URL</label>
                  </div>
                  <div class="row">
                    <div class="col-sm-2">
            					<select value.bind="element.method" class="form-control" change.delegate="elementChanged($index, element)">
            						<option repeat.for="option of RestTypeOptions" model.bind="option.id">${option.id}</option>
            					</select>
            				</div>
                    <div class="col-sm-10">
                      <input type="text" placeholder="Enter the service URL" class="form-control" value.bind="element.url" change.delegate="elementChanged($index, element)">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12">
                      <label>Parameters</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-11">
                      <div repeat.for="parameter of element.keys" ref="$keys" index.bind="$index">
                        <div class="row">
                          <div class="col-sm-5">
                            <label>Parameter Name</label>
                          </div>
                          <div class="col-sm-5">
                            <label>Variable Name</label>
                          </div>
                          <div class="col-sm-2"></div>
                        </div>
                        <div class="row">
                          <div class="col-sm-5">
                            <input class="form-control" type="text" placeholder="Enter parameter name" value.bind="parameter.in" change.delegate="editing_changedKey($keys.index, $root.index, parameter)">
                          </div>
                          <div class="col-sm-5">
                            <select value.bind="parameter.out" class="form-control" change.delegate="editing_changedKey($keys.index, $root.index, parameter)">
                              <option repeat.for="variable of variable_list" model.bind="variable.storage_key">${variable.storage_key}</option>
                  					</select>
                          </div>
                          <div class="col-sm-2">
                            <button type="button" class="btn btn-default btn-circle"
                                    click.delegate="editing_removeKey($keys.index,$root.index)"
                                    disabled.bind="!(element.keys.length>1)">
                              <i class="fa fa-trash" aria-hidden="true"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-1">
                      <div class="row">
                        <div class="col-sm-12">
                          <button type="button" class="btn btn-default btn-circle" click.delegate="editing_addBlankKey($index)"><i class="fa fa-plus" aria-hidden="true"></i></button>
                        </div>
                      </div>
                    </div>

                  </div>
                  <br>
                  <h5>Comparation Response</h5>
                  <div class="row">
                    <div repeat.for="item of element.quick_replies" ref="$replies" index.bind="$index">
                      <div class="col-md-4">
                        <label >Value</label>
                        <input class="form-control" type="text" value.bind="item.title" change.delegate="editing_changedItem($replies.index, $root.index, item)">
                      </div>
                      <div class="col-md-3">
                        <label >Send To</label>
                        <select value.bind="item.sendTo" class="form-control" change.delegate="editing_changedItem($replies.index, $root.index, item)" >
                          <option repeat.for="option of contextChlidContexts" model.bind="option.id">${option.name}</option>
                        </select>
                      </div>
                      <div class="col-md-2">
                        <label >Action</label>
                        <div>
                          <button type="button"
                                  class="btn btn-default btn-circle"
                                  click.delegate="editing_removeItem($replies.index,$root.index)"
                                  disabled.bind="!(element.quick_replies.length>1)">
                            <i class="fa fa-trash" aria-hidden="true"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="timeline-footer">
                <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeElement($index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
            <!-- END REST PLUGIN-->

            <!-- REST PLUGIN-->
            <div if.bind="element.type=='rest'"  class="timeline-item">
              <!--<span class="time"><i class="fa fa-clock-o"></i> 12:05</span>-->
              <h3 class="timeline-header"><a href="#">REST PLUGIN</a></h3>
              <div class="timeline-body">
                <div class="panel-heading">REST API Plugin</div>
                <div class="panel-body">
                  <div>
                    <h4>
                      Use this plugin to create various integrations with your server - generate dynamic content
                      or send data. You can apply user attributes in either the URL or the USER ATTRIBUTES field.
                      With POST request type, user attributes will be sent in a standard way. With GET request,
                      they will be added to the URL as GET parameters.
                    </h4>
                  </div>
                  <div class="row">
                    <label class="col-sm-2 ">Type</label>
                    <label class="col-sm-10">URL</label>
                  </div>
                  <div class="row">
                    <div class="col-sm-2">
            					<select value.bind="element.method" class="form-control" change.delegate="elementChanged($index, element)">
            						<option repeat.for="option of RestTypeOptions" model.bind="option.id">${option.id}</option>
            					</select>
            				</div>
                    <div class="col-sm-10">
                      <input type="text" placeholder="Enter the service URL" class="form-control" value.bind="element.url" change.delegate="elementChanged($index, element)">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12">
                      <label>Parameters</label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-11">
                      <div repeat.for="parameter of element.keys" ref="$keys" index.bind="$index">
                        <div class="row">
                          <div class="col-sm-5">
                            <label>Parameter Name</label>
                          </div>
                          <div class="col-sm-5">
                            <label>Variable Name</label>
                          </div>
                          <div class="col-sm-2"></div>
                        </div>
                        <div class="row">
                          <div class="col-sm-5">
                            <input class="form-control" type="text" placeholder="Enter parameter name" value.bind="parameter.in" change.delegate="editing_changedKey($keys.index, $root.index, parameter)">
                          </div>
                          <div class="col-sm-5">
                            <select value.bind="parameter.out" class="form-control" change.delegate="editing_changedKey($keys.index, $root.index, parameter)">
                              <option repeat.for="variable of variable_list" model.bind="variable.storage_key">${variable.storage_key}</option>
                  					</select>
                          </div>
                          <div class="col-sm-2">
                            <button type="button" class="btn btn-default btn-circle"
                                    click.delegate="editing_removeKey($keys.index,$root.index)"
                                    disabled.bind="!(element.keys.length>1)">
                              <i class="fa fa-trash" aria-hidden="true"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-1">
                      <div class="row">
                        <div class="col-sm-12">
                          <button type="button" class="btn btn-default btn-circle" click.delegate="editing_addBlankKey($index)"><i class="fa fa-plus" aria-hidden="true"></i></button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="timeline-footer">
                <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeElement($index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
            <!-- END REST PLUGIN-->
            <!-- ATTACHMENT-->
            <div if.bind="element.type=='attachment'"  class="timeline-item">
              <!--<span class="time"><i class="fa fa-clock-o"></i> 12:05</span>-->
              <h3 class="timeline-header"><a href="#">Attachment</a></h3>
              <div class="timeline-body">
                <div class="panel-body">
                  <div class="row">
                    <label class="col-sm-2 ">Display Type</label>
                    <label class="col-sm-10">URL</label>
                  </div>
                  <div class="row">
                    <div class="col-sm-2">
            					<select value.bind="element.media_type" class="form-control" change.delegate="elementChanged($index, element)">
            						<option repeat.for="option of ['link', 'upload']" model.bind="option">${option}</option>
            					</select>
            				</div>
                    <div class="col-sm-10">
                      <input type="text" placeholder="Asset URL" class="form-control" value.bind="element.url" change.delegate="elementChanged($index, element)">
                    </div>
                  </div>
                </div>
              </div>
              <div class="timeline-footer">
                <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeElement($index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
            <!-- END ATTACHMENT-->
            <div if.bind="element.type=='quick_reply'"  class="timeline-item">
              <!--<span class="time"><i class="fa fa-clock-o"></i> 12:05</span>-->
              <h3 class="timeline-header"><a href="#">Quick Reply</a></h3>
              <div class="timeline-body">
                <div class="row">
                  <label class="col-sm-2 control-label">Content</label>
                  <div class="col-sm-10">
                    <textarea class="form-control" rows="5" value.bind="element.content"
                              change.delegate="elementChanged($index, element)"></textarea>
                  </div>
                </div>
                <br>
                <div class="row">
                  <label class="col-sm-2 control-label">Store on</label>
                  <div class="col-sm-10">
                    <autocomplete  value.bind="element.store" service.bind="variableService"
                            placeholder="Enter variable name" change.delegate="elementChanged($index, element)">
                    </autocomplete>
          					<!--<input class="form-control" type="text" value.bind="element.store"
                           change.delegate="elementChanged($index, element)">-->

          				</div>
                </div>
                <h5>Quick replies</h5>
                <div class="row">
                  <div repeat.for="item of element.quick_replies" ref="$replies" index.bind="$index">
                    <div class="col-md-3">
                      <label>Content Type</label>
                      <select class="form-control" value.bind="item.content_type" change.delegate="editing_changedItem($replies.index, $root.index, item)">
                        <option value="text">text</option>
                        <option value="location">location</option>
                      </select>
                    </div>
                    <div class="col-md-4">
                      <label >Title</label>
                      <input class="form-control" type="text" value.bind="item.title" change.delegate="editing_changedItem($replies.index, $root.index, item)">
                    </div>
                    <div class="col-md-3">
                      <label >Send To</label>
                      <select value.bind="item.sendTo" class="form-control" change.delegate="editing_changedItem($replies.index, $root.index, item)" >
            						<option repeat.for="option of contextChlidContexts" model.bind="option.id">${option.name}</option>
            					</select>
                    </div>
                    <div class="col-md-2">
                      <label >Action</label>
                      <div>
                        <button type="button"
                                class="btn btn-default btn-circle"
                                click.delegate="editing_removeItem($replies.index,$root.index)"
                                disabled.bind="!(element.quick_replies.length>1)">
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="timeline-body">
                <button type="button" class="btn btn-default btn-circle" click.delegate="editing_addBlank($index)"><i class="fa fa-plus" aria-hidden="true"></i></button>
              </div>
              <div class="timeline-footer">
                 <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeElement($index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
            <div if.bind="element.type=='end'"  class="timeline-item">
              <!--<span class="time"><i class="fa fa-clock-o"></i> 12:05</span>-->
              <h3 class="timeline-header"><a href="#">Flow Return/End</a></h3>
              <div class="timeline-body">
                <label class="col-sm-2 control-label">Action</label>
                <div class="col-sm-10">
                  <select value.bind="element.action" class="form-control" change.delegate="elementChanged($index, element)" >
                    <option repeat.for="option of EndRepeatOptions" model.bind="option.id">${option.name}</option>
                  </select>
                </div>
              </div>
              <div class="timeline-footer">
                <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeElement($index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
            <!-- _________________ SMART OBJECTS _________________ -->
            <!-- _________________ SMART TEXT _________________ -->
            <div if.bind="element.type=='smartText'"  class="timeline-item">
              <h3 class="timeline-header"><a href="#">Smart Text</a></h3>
              <div class="timeline-body">
                <div class="row">
                  <label class="col-sm-2 control-label">Content</label>
                  <div class="col-sm-10">
                    <textarea class="form-control" rows="5" value.bind="element.content" change.delegate="elementChanged($index, element)"></textarea>
                  </div>
                </div>
                <br>
                <div class="row">
                  <label class="col-sm-2 control-label">Type</label>
                  <div class="col-sm-10">
                    <select change.delegate="elementChanged($index, element)" class="form-control" value.bind="element.validation">
                      <option model.bind="'0'">Unselected</option>
                      <option model.bind="'1'">Text</option>
                      <option model.bind="'2'">Number</option>
                      <option model.bind="'3'">Email</option>
                      <option model.bind="'4'">Date</option>
                      <option model.bind="'5'">NIT</option>
                      <option model.bind="'6'">DPI</option>
                    </select>
                  </div>
                </div>
                <div class="row">
                  <label class="col-sm-2 control-label">Store on</label>
                  <div class="col-sm-10">
          					<!--<input class="form-control" type="text" value.bind="element.store"
                           change.delegate="elementChanged($index, element)">-->
                     <autocomplete  value.bind="element.store" service.bind="variableService"
                             placeholder="Enter variable name" change.delegate="elementChanged($index, element)">
                     </autocomplete>
          				</div>
                </div>
              </div>
              <div class="timeline-footer">
                <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeElement($index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
            <!-- _________________ SMART REPLY _________________ -->
            <div if.bind="element.type=='smartReply'"  class="timeline-item">
              <!--<span class="time"><i class="fa fa-clock-o"></i> 12:05</span>-->
              <h3 class="timeline-header"><a href="#">Smart Reply</a></h3>
              <div class="timeline-body">
                <div class="row">
                  <label class="col-sm-2 control-label">Content</label>
                  <div class="col-sm-10">
                    <textarea class="form-control" rows="5" value.bind="element.content"
                              change.delegate="elementChanged($index, element)"></textarea>
                  </div>
                </div>
                <br>
                <br>
                <div class="row">
                  <label class="col-sm-2 control-label">Type</label>
                  <div class="col-sm-10">
                    <select change.delegate="elementChanged($index, element)" class="form-control" value.bind="element.validation">
                      <option model.bind="'0'">Unselected</option>
                      <option model.bind="'1'">Text</option>
                      <option model.bind="'2'">Number</option>
                      <option model.bind="'3'">Email</option>
                      <option model.bind="'4'">Date</option>
                      <option model.bind="'5'">NIT</option>
                      <option model.bind="'6'">DPI</option>
                    </select>
                  </div>
                </div>
                <div class="row">
                  <label class="col-sm-2 control-label">Store on</label>
                  <div class="col-sm-10">
                    <autocomplete  value.bind="element.store" service.bind="variableService"
                            placeholder="Enter variable name" change.delegate="elementChanged($index, element)">
                    </autocomplete>
          				</div>
                </div>
                <h5>Quick replies</h5>
                <div class="row">
                  <div repeat.for="item of element.quick_replies" ref="$replies" index.bind="$index">
                    <div class="col-md-3">
                      <label>Content Type</label>
                      <select class="form-control" value.bind="item.content_type" change.delegate="editing_changedItem($replies.index, $root.index, item)">
                        <option value="text">text</option>
                        <option value="location">location</option>
                      </select>
                    </div>
                    <div class="col-md-4">
                      <label >Title</label>
                      <input class="form-control" type="text" value.bind="item.title" change.delegate="editing_changedItem($replies.index, $root.index, item)">
                    </div>
                    <div class="col-md-3">
                      <label >Send To</label>
                      <select value.bind="item.sendTo" class="form-control" change.delegate="editing_changedItem($replies.index, $root.index, item)" >
            						<option repeat.for="option of contextChlidContexts" model.bind="option.id">${option.name}</option>
            					</select>
                    </div>
                    <div class="col-md-2">
                      <label >Action</label>
                      <div>
                        <button type="button"
                                class="btn btn-default btn-circle"
                                click.delegate="editing_removeItem($replies.index,$root.index)"
                                disabled.bind="!(element.quick_replies.length>1)">
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="timeline-body">
                <button type="button" class="btn btn-default btn-circle" click.delegate="editing_addBlank($index)"><i class="fa fa-plus" aria-hidden="true"></i></button>
              </div>
              <div class="timeline-footer">
                 <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeElement($index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
            <div if.bind="element.type=='validationReply'"  class="timeline-item">
              <!--<span class="time"><i class="fa fa-clock-o"></i> 12:05</span>-->
              <h3 class="timeline-header"><a href="#">Validation Reply</a></h3>
              <div class="timeline-body">
                <div class="row">
                  <label class="col-sm-2 control-label">Content</label>
                  <div class="col-sm-10">
                    <textarea class="form-control" rows="5" value.bind="element.content"
                              change.delegate="elementChanged($index, element)"></textarea>
                  </div>
                </div>
                <br>
                <br>
                <div class="row">
                  <label class="col-sm-2 control-label">Type</label>
                  <div class="col-sm-10">
                    <select change.delegate="elementChanged($index, element)" class="form-control" value.bind="element.validation">
                      <option model.bind="'0'">Unselected</option>
                      <option model.bind="'1'">Text</option>
                      <option model.bind="'2'">Number</option>
                      <option model.bind="'3'">Email</option>
                      <option model.bind="'4'">Date</option>
                      <option model.bind="'5'">NIT</option>
                      <option model.bind="'6'">DPI</option>
                    </select>
                  </div>
                </div>
                <div class="row">
                  <label class="col-sm-2 control-label">Content on Error</label>
                  <div class="col-sm-10">
                    <textarea class="form-control" rows="4" value.bind="element.onError"
                              change.delegate="elementChanged($index, element)"></textarea>
                  </div>
                  <br>
                  <label class="col-sm-2 control-label">Retry(0 for infinity)</label>
                  <div class='col-sm-10'>
                    <input class="form-control" type="number" value.bind="element.retry" change.delegate="changedItem($index, item)">
                  </div>
                  <br>
                  <label class="col-sm-2 control-label">Send to context</label>
                  <div class='col-sm-10'>
                    <select value.bind="element.sendTo" class="form-control" >
                      <option repeat.for="option of contextChlidContexts" model.bind="option.id">${option.name}</option>
                    </select>
                  </div>
                </div>

                <div class="row">
                  <label class="col-sm-2 control-label">Store on</label>
                  <div class="col-sm-10">
                    <autocomplete  value.bind="element.store" service.bind="variableService"
                            placeholder="Enter variable name" change.delegate="elementChanged($index, element)">
                    </autocomplete>
          				</div>
                </div>
                <h5>Quick replies</h5>
                <div class="row">
                  <div repeat.for="item of element.quick_replies" ref="$replies" index.bind="$index">
                    <div class="col-md-3">
                      <label>Content Type</label>
                      <select class="form-control" value.bind="item.content_type" change.delegate="editing_changedItem($replies.index, $root.index, item)">
                        <option value="text">text</option>
                        <option value="location">location</option>
                      </select>
                    </div>
                    <div class="col-md-4">
                      <label >Title</label>
                      <input class="form-control" type="text" value.bind="item.title" change.delegate="editing_changedItem($replies.index, $root.index, item)">
                    </div>
                    <div class="col-md-3">
                      <label >Send To</label>
                      <select value.bind="item.sendTo" class="form-control" change.delegate="editing_changedItem($replies.index, $root.index, item)" >
            						<option repeat.for="option of contextChlidContexts" model.bind="option.id">${option.name}</option>
            					</select>
                    </div>
                    <div class="col-md-2">
                      <label >Action</label>
                      <div>
                        <button type="button"
                                class="btn btn-default btn-circle"
                                click.delegate="editing_removeItem($replies.index,$root.index)"
                                disabled.bind="!(element.quick_replies.length>1)">
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="timeline-body">
                <button type="button" class="btn btn-default btn-circle" click.delegate="editing_addBlank($index)"><i class="fa fa-plus" aria-hidden="true"></i></button>
              </div>
              <div class="timeline-footer">
                 <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeElement($index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
<!-- *********************************block has been create******************************************************** -->   
            <div if.bind="element.type=='validationText'"  class="timeline-item">
              <!--<span class="time"><i class="fa fa-clock-o"></i> 12:05</span>-->
              <h3 class="timeline-header"><a href="#">Validation Text</a></h3>
              <div class="timeline-body">
                <div class="row">
                  <label class="col-sm-2 control-label">Content</label>
                  <div class="col-sm-10">
                    <textarea class="form-control" rows="5" value.bind="element.content"
                              change.delegate="elementChanged($index, element)"></textarea>
                  </div>
                </div>
                <br>
                <br>
                <!-- validaciones -->
                <div class="row">
                  <label class="col-sm-2 control-label">Type</label>
                  <div class="col-sm-10">
                    <select change.delegate="elementChanged($index, element)" class="form-control" value.bind="element.validation">
                      <option model.bind="'0'">Unselected</option>
                      <option model.bind="'1'">Text</option>
                      <option model.bind="'2'">Number</option>
                      <option model.bind="'3'">Email</option>
                      <option model.bind="'4'">Date</option>
                      <option model.bind="'5'">NIT</option>
                      <option model.bind="'6'">DPI</option>
                    </select>
                  </div>
                </div>
                <div class="row">
                  <label class="col-sm-2 control-label"> Content on error</label>
                  <div class='col-sm-10'>
                    <textarea class="form-control" rows="5" value.bind="element.onError"
                              change.delegate="elementChanged($index, element)"></textarea>
                  </div>
                  <br>
                  <label class="col-sm-2 control-label">Retry(0 for infinity)</label>
                  <div class='col-sm-10'>
                    <input class="form-control" type="number" value.bind="element.retry" change.delegate="changedItem($index, item)">
                  </div>
                  <br>
                  <label class="col-sm-2 control-label">Send to context</label>
                  <div class='col-sm-10'>
                    <select value.bind="element.sendTo" class="form-control" >
                      <option repeat.for="option of contextChlidContexts" model.bind="option.id">${option.name}</option>
                    </select>
                  </div>
                </div>
                <div class="row">
                  <label class="col-sm-2 control-label">Store on</label>
                  <div class="col-sm-10">
                    <autocomplete  value.bind="element.store" service.bind="variableService"
                            placeholder="Enter variable name" change.delegate="elementChanged($index, element)">
                    </autocomplete>
                  </div>
                </div>

              </div>
              <div class="timeline-footer">
                 <button type="button" class="btn btn-default btn-circle btn-xl" click.delegate="removeElement($index)"><i class="fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
          </li>
        </ul>
<!-- *************************************************************************************************************************** -->        
        <!-- add template element-->
        <div class="panel panel-primary" show.bind="isAttachment" >
          <div class="panel-heading">Adding Attachment element</div>
          <div class="panel-body">
            <div class="row">
              <label class="col-sm-2 ">Display Type</label>
            </div>
            <div class="row">
              <div class="col-sm-2">
      					<select value.bind="selectedValMethodx" class="form-control" >
      						<option repeat.for="option of ['link', 'upload']" model.bind="option">${option}</option>
      					</select>
      				</div>
            </div>
            <div class="row">
              <label class="col-sm-2 ">Media Type</label>
              <label class="col-sm-2 ">Media URL/File</label>
            </div>
            <div class="row">
              <div class="col-sm-2">
      					<select value.bind="selectedMediaType" class="form-control" >
      						<option repeat.for="option of ['url', 'upload']" model.bind="option">${option}</option>
      					</select>
      				</div>
              <div class="col-sm-10" show.bind="selectedMediaType != 'upload'">
                <input type="text" placeholder="Enter the item URL" class="form-control" value.bind="serviceURL">
              </div>
              <div class="col-sm-10" show.bind="selectedMediaType == 'upload'">
                <input type="file" accept="image/*" class="form-control" files.bind="uploadFile">
              </div>
            </div>
            <br>
            <div class="row">
              <label class="col-sm-2 control-label">Store on</label>
              <div class="col-sm-10">
      					<!--<input class="form-control" type="text" value.bind="StoreOnText">-->
                <autocomplete service.bind="variableService" value.bind="StoreOnText" placeholder="Enter variable name"></autocomplete>
      				</div>
            </div>
            <button class="btn btn-primary" click.delegate="additem('attachment')">Add</button>
          </div>
        </div>
        <!-- add text element-->
        <div class="panel panel-primary" show.bind="isCheckPoint" >
          <div class="panel-heading">Adding checkpoint </div>
          <div class="panel-body">
            <div class="row">
              <label class="col-sm-2 control-label">Name</label>
              <div class="col-sm-10">
                <textarea class="form-control" rows="1" value.bind="checkPointId"></textarea>
              </div>
            </div>
            <br>
            <button class="btn btn-primary" click.delegate="additem('checkPoint')">Add</button>
          </div>
        </div>
        <div class="panel panel-primary" show.bind="istext" >
          <div class="panel-heading">Adding text element</div>
          <div class="panel-body">
            <div class="row">
              <label class="col-sm-2 control-label">Content</label>
              <div class="col-sm-10">
                <textarea class="form-control" rows="5" value.bind="ContentValue"></textarea>
              </div>
            </div>
            <br>
            <div class="row">
              <label class="col-sm-2 control-label">Store on</label>
              <div class="col-sm-10">
      					<!--<input class="form-control" type="text" value.bind="StoreOnText">-->
                <autocomplete service.bind="variableService" value.bind="StoreOnText" placeholder="Enter variable name"></autocomplete>
      				</div>
            </div>
            <button class="btn btn-primary" click.delegate="additem('text')">Add</button>
          </div>
        </div>
        <!-- ./add text element-->
        <!-- add SA element-->
    		<div class="panel panel-primary" show.bind="isSA">
    			<div class="panel-heading">Adding sender action element</div>
    			<div class="panel-body">
    				<label class="col-sm-2 control-label">Action</label>
    				<div class="col-sm-10">
    					<select value.bind="selectedValSA" class="form-control" >
    						<option repeat.for="action of SenderActionOptions" model.bind="action.id">${action.name}</option>
    					</select>
    				</div>
    				<button class="btn btn-primary" click.delegate="additem('sender_action')">Add</button>
    			</div>
    		</div>
    		<!-- ./add SA element-->
    		<!-- add QR element-->
    		<div class="panel panel-primary" show.bind="isQR">
    			<div class="panel-heading">Adding quick reply element</div>
    			<div class="panel-body">
            <div class="row">
      				<label class="col-sm-2 control-label">Content</label>
      				<div class="col-sm-10">
      					<textarea class="form-control" rows="5" value.bind="ContentValueQR"></textarea>
      				</div>
            </div>
            <br>
            <div class="row">
              <label class="col-sm-2 control-label">Store on</label>
              <div class="col-sm-10">
                  <autocomplete service.bind="variableService" value.bind="StoreOnQR" placeholder="Enter variable name"></autocomplete>
      				</div>
            </div>
    				<label class="col-sm-2 control-label">Quick replies:</label>
    				<div class="col-sm-12">
    					<div class="form-inline" repeat.for="item of items">
    						<div class="form-group">
    							<label>Content Type</label>
    							<select class="form-control" value.bind="item.content_type" change.delegate="changedItem($index, item)">
    								<option value="text">text</option>
    								<option value="location">location</option>
    							</select>
    							<label >Title</label>
    							<input class="form-control" type="text" value.bind="item.title" change.delegate="changedItem($index, item)">
    							<label >Send to Context:</label>
                  <select value.bind="item.sendTo" class="form-control" >
        						<option repeat.for="option of contextChlidContexts" model.bind="option.id">${option.name}</option>
        					</select>
    							<button type="button" class="btn btn-default btn-circle" click.delegate="removeItem($index)" disabled.bind="!canRemove" ><i class="fa fa-trash" aria-hidden="true"></i></button>
    						</div>
    					</div>
    					<button type="button" class="btn btn-default btn-circle" click.delegate="addBlank()"><i class="fa fa-plus" aria-hidden="true"></i></button>
    				</div>
    			</div>
    			<div class="panel-body">
    				<button class="btn btn-primary" click.delegate="additem('quick_reply')">Add</button>
    			</div>
    		</div>
        <!-- ./add QR element-->
        <!-- add rest-plugin  element -->
        <div class="panel panel-primary" show.bind="isRest">
          <div class="panel-heading">REST API Plugin</div>
          <div class="panel-body">
            <div>
              <h4>
                Use this plugin to create various integrations with your server - generate dynamic content
                or send data. You can apply user attributes in either the URL or the USER ATTRIBUTES field.
                With POST request type, user attributes will be sent in a standard way. With GET request,
                they will be added to the URL as GET parameters.
              </h4>
            </div>
            <div class="row">
              <label class="col-sm-2 ">Type</label>
              <label class="col-sm-10">URL</label>
            </div>
            <div class="row">
              <div class="col-sm-2">
      					<select value.bind="selectedValMethod" class="form-control" >
      						<option repeat.for="option of RestTypeOptions" model.bind="option.id">${option.id}</option>
      					</select>
      				</div>
              <div class="col-sm-10">
                <input type="text" placeholder="Enter the service URL" class="form-control" value.bind="serviceURL">
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <label>Parameters</label>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-11">
                <div repeat.for="parameter of keys">
                  <div class="row">
                    <div class="col-sm-5">
                      <label>Parameter Name</label>
                    </div>
                    <div class="col-sm-5">
                      <label>Variable Name</label>
                    </div>
                    <div class="col-sm-2"></div>
                  </div>
                  <div class="row">
                    <div class="col-sm-5">
                      <input class="form-control" type="text" placeholder="Enter parameter name" value.bind="parameter.in" change.delegate="changedParameter($index, parameter)">
                    </div>
                    <div class="col-sm-5">
                      <select value.bind="parameter.out" class="form-control" change.delegate="changedParameter($index, parameter)" >
                        <option repeat.for="variable of variable_list" model.bind="variable.storage_key">${variable.storage_key}</option>
            					</select>
                    </div>
                    <div class="col-sm-2">
                      <button type="button" class="btn btn-default btn-circle" click.delegate="removeParameter($index)" disabled.bind="!canRemoveParameter" >
                        <i class="fa fa-trash" aria-hidden="true"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-1">
                <div class="row">
                  <div class="col-sm-12">
                    <button type="button" class="btn btn-default btn-circle" click.delegate="addBlankParameter()">
                      <i class="fa fa-plus" aria-hidden="true"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <br>
                <br>
                <button class="btn btn-primary" click.delegate="additem('rest')">Add</button>
              </div>
            </div>
          </div>
        </div>
        <!-- /add rest-plugin element -->
        <!-- add end/repeat element -->
        <div class="panel panel-primary" show.bind="isEnd">
          <div class="panel-heading">Adding an repeat/return flow element </div>
          <div class="panel-body">
            <label class="col-sm-2 ">Flow Action</label>
            <div class="col-sm-10">
    					<select value.bind="selectedValEnd" class="form-control" >
    						<option repeat.for="option of EndRepeatOptions" model.bind="option.id">${option.name}</option>
    					</select>
    				</div>
            <button class="btn btn-primary" click.delegate="additem('end')">Add</button>
          </div>
        </div>
        <!-- /add end/repeat element -->
        <!-- add smart text element-->
        <div class="panel panel-primary" show.bind="isSmartText" >
          <div class="panel-heading">Adding smart text element</div>
          <div class="panel-body">
            <div class="row">
              <label class="col-sm-2 control-label">Content</label>
              <div class="col-sm-10">
                <textarea class="form-control" rows="5" value.bind="SmartContentValue"></textarea>
              </div>
            </div>
            <br>
            <div class="row">
              <label class="col-sm-2 control-label">Type</label>
              <div class="col-sm-10">
                <select class="form-control" value.bind="SmartValidationValue">
                  <option model.bind="'0'">Unselected</option>
                  <option model.bind="'1'">Text</option>
                  <option model.bind="'2'">Number</option>
                  <option model.bind="'3'">Email</option>
                  <option model.bind="'4'">Date</option>
                  <option model.bind="'5'">NIT</option>
                  <option model.bind="'6'">DPI</option>
                </select>
              </div>
            </div>
            <br>

            <div class="row">
              <label class="col-sm-2 control-label">Store on</label>
              <div class="col-sm-10">
                <!--<input class="form-control" type="text" value.bind="StoreOnText">-->
                <autocomplete service.bind="variableService" value.bind="StoreOnSmartText" placeholder="Enter variable name"></autocomplete>
              </div>
            </div>
            <button class="btn btn-primary" click.delegate="additem('smartText')">Add</button>
          </div>
        </div>
        <!-- ./add smart text element-->
        <!-- add smart reply element-->
        <div class="panel panel-primary" show.bind="isSmartReply">
    			<div class="panel-heading">Adding smart reply element</div>
    			<div class="panel-body">
            <div class="row">
      				<label class="col-sm-2 control-label">Content</label>
      				<div class="col-sm-10">
      					<textarea class="form-control" rows="5" value.bind="SmartReplyContentValue"></textarea>
      				</div>
            </div>
            <br>
            <div class="row">
              <label class="col-sm-2 control-label">Type</label>
              <div class="col-sm-10">
                <select class="form-control" value.bind="SmartReplayValidationValue">
                  <option model.bind="'0'">Unselected</option>
                  <option model.bind="'1'">Text</option>
                  <option model.bind="'2'">Number</option>
                  <option model.bind="'3'">Email</option>
                  <option model.bind="'4'">Date</option>
                  <option model.bind="'5'">NIT</option>
                  <option model.bind="'6'">DPI</option>
                </select>
              </div>
            </div>
            <br>

            <div class="row">
              <label class="col-sm-2 control-label">Store on</label>
              <div class="col-sm-10">
                  <autocomplete service.bind="variableService" value.bind="StoreOnSR" placeholder="Enter variable name"></autocomplete>
      				</div>
            </div>
    				<label class="col-sm-2 control-label">Quick replies:</label>
    				<div class="col-sm-12">
    					<div class="form-inline" repeat.for="item of items">
    						<div class="form-group">
    							<label>Content Type</label>
    							<select class="form-control" value.bind="item.content_type" change.delegate="changedItem($index, item)">
    								<option value="text">text</option>
    								<option value="location">location</option>
    							</select>
    							<label >Title</label>
    							<input class="form-control" type="text" value.bind="item.title" change.delegate="changedItem($index, item)">
    							<label >Send to Context:</label>
                  <select value.bind="item.sendTo" class="form-control" >
        						<option repeat.for="option of contextChlidContexts" model.bind="option.id">${option.name}</option>
        					</select>
    							<button type="button" class="btn btn-default btn-circle" click.delegate="removeItem($index)" disabled.bind="!canRemove" ><i class="fa fa-trash" aria-hidden="true"></i></button>
    						</div>
    					</div>
    					<button type="button" class="btn btn-default btn-circle" click.delegate="addBlank()"><i class="fa fa-plus" aria-hidden="true"></i></button>
    				</div>
    			</div>
    			<div class="panel-body">
    				<button class="btn btn-primary" click.delegate="additem('smartReply')">Add</button>
    			</div>
    		</div>
        <div class="panel panel-primary" show.bind="isChatCenter">
    			<div class="panel-heading">Adding Chat Center element</div>
    			<div class="panel-body">
            <div class="row">
      				<label class="col-sm-2 control-label">Content</label>
      				<div class="col-sm-10">
      					<textarea class="form-control" rows="5" value.bind="ChatCenterContentValue"></textarea>
      				</div>
            </div>
            <br>
            <div class="row">
              <label class="col-sm-2 control-label">Store on</label>
              <div class="col-sm-10">
                  <autocomplete service.bind="variableService" value.bind="StoreOnChatCenter" placeholder="Enter variable name"></autocomplete>
      				</div>
            </div>
    			</div>
    			<div class="panel-body">
    				<button class="btn btn-primary" click.delegate="additem('chatCenter')">Add</button>
    			</div>
    		</div>

        <div class="panel panel-primary" show.bind="isValidationReply">
    			<div class="panel-heading">Adding Validation Reply element</div>
    			<div class="panel-body">
            <div class="row">
      				<label class="col-sm-2 control-label">Content</label>
      				<div class="col-sm-10">
      					<textarea class="form-control" rows="5" value.bind="validationReplyValue"></textarea>
      				</div>
            </div>
            <br>
            <div class="row">
              <label class="col-sm-2 control-label">Type</label>
              <div class="col-sm-10">
                <select class="form-control" value.bind="validationReplyValidationValue">
                  <option model.bind="'0'">Unselected</option>
                  <option model.bind="'1'">Text</option>
                  <option model.bind="'2'">Number</option>
                  <option model.bind="'3'">Email</option>
                  <option model.bind="'4'">Date</option>
                  <option model.bind="'5'">NIT</option>
                  <option model.bind="'6'">DPI</option>
                </select>
              </div>
            </div>
            <br>
            <div class="row">
              <label class="col-sm-2 control-label">Content on Error</label>
              <div class="col-sm-10">
                <textarea class="form-control" rows="4" value.bind="validationReplyError"></textarea>
              </div>
              <label class="col-sm-2 control-label">Retry(0 for infinity)</label>
              <div class='col-sm-10'>
                <input class="form-control" type="number" value.bind="validationReplyRetry" change.delegate="changedItem($index, item)">
              </div>
              <br>
              <label class="col-sm-2 control-label">Send to context</label>
              <div class='col-sm-10'>
                <select value.bind="validationReplysendTo" class="form-control" >
                  <option repeat.for="option of contextChlidContexts" model.bind="option.id">${option.name}</option>
                </select>
              </div>
            </div>
            <br>
            <div class="row">
              <label class="col-sm-2 control-label">Store on</label>
              <div class="col-sm-10">
                  <autocomplete service.bind="variableService" value.bind="StoreOnSR" placeholder="Enter variable name"></autocomplete>
      				</div>
            </div>
    				<label class="col-sm-2 control-label">Quick replies:</label>
    				<div class="col-sm-12">
    					<div class="form-inline" repeat.for="item of items">
    						<div class="form-group">
    							<label>Content Type</label>
    							<select class="form-control" value.bind="item.content_type" change.delegate="changedItem($index, item)">
    								<option value="text">text</option>
    								<option value="location">location</option>
    							</select>
    							<label >Title</label>
    							<input class="form-control" type="text" value.bind="item.title" change.delegate="changedItem($index, item)">
    							<label >Send to Context:</label>
                  <select value.bind="item.sendTo" class="form-control" >
        						<option repeat.for="option of contextChlidContexts" model.bind="option.id">${option.name}</option>
        					</select>
    							<button type="button" class="btn btn-default btn-circle" click.delegate="removeItem($index)" disabled.bind="!canRemove" ><i class="fa fa-trash" aria-hidden="true"></i></button>
    						</div>
    					</div>
    					<button type="button" class="btn btn-default btn-circle" click.delegate="addBlank()"><i class="fa fa-plus" aria-hidden="true"></i></button>
    				</div>
    			</div>
    			<div class="panel-body">
    				<button class="btn btn-primary" click.delegate="additem('validationReply')">Add</button>
    			</div>
    		</div>

        <!-- ./add smart text element-->
        <!-- add smart reply element-->
<!-- *************************************create block************************************************************ -->           
        <div class="panel panel-primary" show.bind="isValidationText">
    			<div class="panel-heading">Adding Validation Text element</div>
    			<div class="panel-body">
            <div class="row">
      				<label class="col-sm-2 control-label">Content</label>
      				<div class="col-sm-10">
      					<textarea class="form-control" rows="5" value.bind="validationTextValue"></textarea>
      				</div>
            </div>
            <br>
            <div class="row">
              <label class="col-sm-2 control-label">Type</label>
              <div class="col-sm-10">
                <select class="form-control" value.bind="validationTextValidationValue">
                  <option model.bind="'0'">Unselected</option>
                  <option model.bind="'1'">Text</option>
                  <option model.bind="'2'">Number</option>
                  <option model.bind="'3'">Email</option>
                  <option model.bind="'4'">Date</option>
                  <option model.bind="'5'">NIT</option>
                  <option model.bind="'6'">DPI</option>
                </select>
              </div>
            </div>
            <br>
            <div class="row">
              <label class="col-sm-2 control-label">Content on error</label>
              <div class='col-sm-10'>
                <textarea class="form-control" rows="4" value.bind="validationTextError"></textarea>
              </div>
              <br>
              <label class="col-sm-2 control-label">Retry(0 for infinity)</label>
              <div class='col-sm-10'>
                <input class="form-control" type="number" value.bind="validationTextRetry" change.delegate="changedItem($index, item)">
              </div>
              <br>
              <label class="col-sm-2 control-label">Send to context</label>
              <div class='col-sm-10'>
                <select value.bind="validationTextsendTo" class="form-control" >
                  <option repeat.for="option of contextChlidContexts" model.bind="option.id">${option.name}</option>
                </select>
              </div>
            </div>
            <br>
            <div class="row">
              <label class="col-sm-2 control-label">Store on</label>
              <div class="col-sm-10">
                  <autocomplete service.bind="variableService" value.bind="StoreOnSR" placeholder="Enter variable name"></autocomplete>
      				</div>
            </div>

    			</div>
    			<div class="panel-body">
    				<button class="btn btn-primary" click.delegate="additem('validationText')">Add</button>
    			</div>
    		</div>
<!-- *************************************************************************************************************************** -->   
<!-- Decision REst-->

        <div class="panel panel-primary" show.bind="isDecisionRest">
          <div class="panel-heading">Decision REST API Plugin</div>
          <div class="panel-body">
            <div>
              <h4>
                Use this plugin to create various integrations with your server - generate dynamic content
                or send data. You can apply user attributes in either the URL or the USER ATTRIBUTES field.
                With POST request type, user attributes will be sent in a standard way. With GET request,
                they will be added to the URL as GET parameters.
              </h4>
            </div>
            <div class="row">
              <label class="col-sm-2 ">Type</label>
              <label class="col-sm-10">URL</label>
            </div>
            <div class="row">
              <div class="col-sm-2">
                <select value.bind="selectedValMethod" class="form-control" >
                  <option repeat.for="option of RestTypeOptions" model.bind="option.id">${option.id}</option>
                </select>
              </div>
              <div class="col-sm-10">
                <input type="text" placeholder="Enter the service URL" class="form-control" value.bind="serviceURL">
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <label>Parameters</label>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-11">
                <div repeat.for="parameter of keys">
                  <div class="row">
                    <div class="col-sm-5">
                      <label>Parameter Name</label>
                    </div>
                    <div class="col-sm-5">
                      <label>Variable Name</label>
                    </div>
                    <div class="col-sm-2"></div>
                  </div>
                  <div class="row">
                    <div class="col-sm-5">
                      <input class="form-control" type="text" placeholder="Enter parameter name" value.bind="parameter.in" change.delegate="changedParameter($index, parameter)">
                    </div>
                    <div class="col-sm-5">
                      <select value.bind="parameter.out" class="form-control" change.delegate="changedParameter($index, parameter)" >
                        <option repeat.for="variable of variable_list" model.bind="variable.storage_key">${variable.storage_key}</option>
                      </select>
                    </div>
                    <div class="col-sm-2">
                      <button type="button" class="btn btn-default btn-circle" click.delegate="removeParameter($index)" disabled.bind="!canRemoveParameter" >
                        <i class="fa fa-trash" aria-hidden="true"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-1">
                <div class="row">
                  <div class="col-sm-12">
                    <button type="button" class="btn btn-default btn-circle" click.delegate="addBlankParameter()">
                      <i class="fa fa-plus" aria-hidden="true"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <br>
            <div class="row">
              <label class="col-sm-2 control-label">Comparation response:</label>
      				<div class="col-sm-12">
      					<div class="form-inline" repeat.for="item of items">
      						<div class="form-group">
      							<label >Value</label>
      							<input class="form-control" type="text" value.bind="item.title" change.delegate="changedItem($index, item)">
      							<label >Send to Context:</label>
                    <select value.bind="item.sendTo" class="form-control" >
          						<option repeat.for="option of contextChlidContexts" model.bind="option.id">${option.name}</option>
          					</select>
      							<button type="button" class="btn btn-default btn-circle" click.delegate="removeItem($index)" disabled.bind="!canRemove" ><i class="fa fa-trash" aria-hidden="true"></i></button>
      						</div>
      					</div>
      					<button type="button" class="btn btn-default btn-circle" click.delegate="addBlank()"><i class="fa fa-plus" aria-hidden="true"></i></button>
      				</div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <br>
                <br>
                <button class="btn btn-primary" click.delegate="additem('decisionRest')">Add</button>
              </div>
            </div>
          </div>
        </div>
        <div class="panel panel-primary" show.bind="isCaptcha">
            <div class="panel-heading">Captcha</div>
            <div class="panel-body">
              <div>
                <h4>Use this field for generate a captcha into the bot chat</h4>
              </div>
            
              <div class="row">
                  <label class="col-sm-3 control-label">Retry(0 for infinity)</label>
                  <div class='col-sm-9'>
                    <input class="form-control" type="number" value.bind="element.retry" change.delegate="changedItem($index, item)">
                  </div>
              </div>
              <br>

              <div class="row">
                <label class="col-sm-3 control-label">Message in captcha if isn't resolved</label>
                <div class="col-sm-9">
                  <textarea class="form-control" rows="5" value.bind="element.message" change.delegate="changedItem($index, item)"></textarea>
                </div>
              </div>
              <br>

              <div class="row">
                  <label for="" class="col-sm-3 control-label">Context if captcha isn't resolved</label>
                  <div class="col-sm-9">
                    <select value.bind="element.sendTo" class="form-control" >
                      <option repeat.for="option of contextChlidContexts" model.bind="option.id">${option.name}</option>
                    </select>
                  </div>
              </div>
              <br><br>

              <div class="row">
                <div class="col-sm-12">
                    <button class="btn btn-primary" click.delegate="additem('captcha')">Add</button>
                </div>
              </div>
            </div>
        </div>

        <!-- ./add smart reply element-->
        <div class="box-footer">
          <div class="row">
            <div class="col-sm-12">
              <h4 class="text-leftS">Add an element</h4>
              <a class="btn btn-app ${istext ? 'active' : ''}" click.delegate="elementSelected('text')">
                <i class="fa fa-file-text-o"></i> Text
              </a>
              <a class="btn btn-app ${isSA ? 'active' : ''}" click.delegate="elementSelected('sa')">
                <i class="fa fa-send-o" ></i> Sender Action
              </a>
              <a class="btn btn-app ${isQR ? 'active' : ''}" click.delegate="elementSelected('qr')">
                <i class="fa fa-reply"></i> Quick Reply
              </a>
              <a class="btn btn-app ${isRest ? 'active' : ''}" click.delegate="elementSelected('rest')">
                <i class="fa fa-exchange"></i> REST API Plugin
              </a>
              <a class="btn btn-app ${isEnd ? 'active' : ''}" click.delegate="elementSelected('end')">
                <i class="fa fa-circle-o-notch"></i> Flow End/Repeat
              </a>
              <a class="btn btn-app ${isSmartText ? 'active' : ''}" click.delegate="elementSelected('smartText')">
                <i class="fa fa-pencil-square-o"></i> Smart Text
              </a>
              <a class="btn btn-app ${isSmartReply ? 'active' : ''}" click.delegate="elementSelected('smartReply')">
                <i class="fa fa-star"></i> Smart Reply
              </a>
              <a show.bind="isTemplate" class="btn btn-app ${isTemplate ? 'active' : ''}" click.delegate="elementSelected('template')">
                <i class="fa fa-list"></i> Template
              </a>
              <a class="btn btn-app ${isAttachment ? 'active' : ''}" click.delegate="elementSelected('attachment')">
                <i class="fa fa-paperclip"></i> Attachment
              </a>
              <a class="btn btn-app ${isChatCenter ? 'active' : ''}" click.delegate="elementSelected('chatCenter')">
                <i class="fa fa-keyboard-o"></i> Chat Center
              </a>
              <a class="btn btn-app ${isValidationText ? 'active' : ''}" click.delegate="elementSelected('validationText')">
                <i class="fa fa-edit"></i> Validation Text
              </a>
              <a class="btn btn-app ${isValidationReply ? 'active' : ''}" click.delegate="elementSelected('validationReply')">
                <i class="fa fa-external-link"></i> Validation Reply
              </a>
              <a class="btn btn-app ${isCheckPoint ? 'active' : ''}" click.delegate="elementSelected('checkPoint')">
                <i class="fa fa-check-circle"></i> CheckPoint
              </a>
              <a class="btn btn-app ${isDecisionRest ? 'active' : ''}" click.delegate="elementSelected('decisionRest')">
                <i class="fa fa-external-link-square"></i> Decision Rest
              </a>
              <a class="btn btn-app ${isCaptcha ? 'active' : ''}"  click.delegate="elementSelected('captcha')">
                <i class="fa fa-lock"></i> Captcha
              </a>
            </div>
          </div>
        </div>
      </div>
      <!-- /.tab-pane -->
      <div class="tab-pane" id="settings">
        <p>Settings</p>
        <div class="panel-body">
          <form>
            <div class="form-group">
              <label>Name</label>
              <div>
                <input type="text" placeholder="name" class="form-control" value.bind="newName">
              </div>
            </div>
            <div class="button-bar">
              <button class="btn btn-primary" click.delegate="changeContextName()" disabled.bind="!canSave">Save</button>
            </div>
          </form>
        </div>
        <!-- /. panel-body -->
      </div>
      <!-- /.tab-pane -->
    </div>
    <!-- /.tab-content -->
  </div>
</template>
